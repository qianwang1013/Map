<section data-ng-controller="UsermapsController" data-ng-init="find(); getCategory(); getCoord();">
    <div class="page-header">
        <h1>List
            <a href = "/#!/usermaps/create" data-ng-show = authentication.user><span class = "glyphicon glyphicon-pencil pull-right"></span></a>
        </h1>
    </div>
    <div class = "row">
        <div class = "col-md-8 col-xs-8">
            <leaflet height="480px" width=100% markers = "markers" center = "center" layers = "layers"></leaflet>
        </div>
        <div class = "col-md-4 col-xs-4" data-ng-show = authentication.user>

            <div class="list-group">

                <a data-ng-repeat="usermap in usermaps" data-ng-href="#!/usermaps/{{usermap._id}}" class="list-group-item">
                    <h4 class="list-group-item-heading" data-ng-bind="usermap.name"></h4>
                    Latitude:
                    <span data-ng-bind = usermap.lat class = "text-muted"></span><br/>
                    Longitude:
                    <span data-ng-bind = usermap.lng class = "text-muted"></span><br/>
                    Notes:
                    <span data-ng-bind = usermap.notes class = "text-muted"></span><br/>
                    <small class="list-group-item-text">
                        Posted on
                        <span data-ng-bind="usermap.created | date:'medium'"></span>
                        by
                        <span data-ng-bind="usermap.user.displayName"></span>
                    </small>

                </a>
            </div>
        </div>


        <div class = "col-md-12 col-xs-8" data-ng-controller="CommentController" data-ng-show = authentication.user data-ng-init = "find()">
            <div class="list-group">
                <div data-ng-repeat="comment in comments" class="list-group-item">
                    <h4  data-ng-bind="comment.user.displayName"></h4>
                    Comment:
                    <span data-ng-bind = comment.comment class = "text-muted"></span><br/>
                    <small class="list-group-item-text">
                        Posted on
                        <span data-ng-bind="comment.created | date:'medium'"></span>
                        by
                        <span data-ng-bind="comment.user.displayName"></span>
                    </small>

                </div>
            </div>

                <div class="col-xs-push-3">
                    <input type = "text" data-ng-model = "comment" id = "comment" class="form-control" placeholder="comment here"/>
                </div>
                <div class="form-group">
                    <input type="submit" class="btn btn-default" data-ng-click = "create()">
                </div>
        </div>
        <div class = "col-md-4 col-xs-4" data-ng-hide = authentication.user>
            <p><h4>Not a user yet</h4></p>
            <p><a href = "/#!/signup" ui-route = "/#!/signup" >Sign up</a> and add your maker on HandsOn Map</p>
        </div>

    <div class = "row">
        <div class="alert alert-warning text-center" data-ng-hide="!usermaps.$resolved || usermaps.length">
            No Usermaps yet, why don't you <a href="/#!/usermaps/create">create one</a>?
        </div>
    </div>
</section>
